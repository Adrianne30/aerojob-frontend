{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/contexts/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// AuthContext.js\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { authAPI } from '../utils/api';\nimport toast from 'react-hot-toast';\n\n// Auth context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\n\n// Actions\nconst AUTH_ACTIONS = {\n  SET_LOADING: 'SET_LOADING',\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n  LOGOUT: 'LOGOUT',\n  UPDATE_USER: 'UPDATE_USER',\n  SET_ERROR: 'SET_ERROR'\n};\n\n// Reducer\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case AUTH_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        user: action.payload.user,\n        token: action.payload.token,\n        isAuthenticated: true,\n        loading: false,\n        error: null\n      };\n    case AUTH_ACTIONS.LOGOUT:\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        error: null\n      };\n    case AUTH_ACTIONS.UPDATE_USER:\n      return {\n        ...state,\n        user: action.payload\n      };\n    case AUTH_ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        loading: false\n      };\n    default:\n      return state;\n  }\n};\n\n// Provider\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(authReducer, {\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    token: localStorage.getItem('token') || null,\n    isAuthenticated: !!localStorage.getItem('token'),\n    loading: false,\n    error: null\n  });\n\n  // Persist changes to localStorage\n  useEffect(() => {\n    if (state.user && state.token) {\n      localStorage.setItem('user', JSON.stringify(state.user));\n      localStorage.setItem('token', state.token);\n    } else {\n      localStorage.removeItem('user');\n      localStorage.removeItem('token');\n    }\n  }, [state.user, state.token]);\n\n  // Login function\n  const login = async (email, password) => {\n    dispatch({\n      type: AUTH_ACTIONS.SET_LOADING,\n      payload: true\n    });\n    try {\n      const res = await authAPI.post('/login', {\n        email,\n        password\n      });\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_SUCCESS,\n        payload: {\n          user: res.data.user,\n          token: res.data.token\n        }\n      });\n      toast.success('Login successful!');\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      dispatch({\n        type: AUTH_ACTIONS.SET_ERROR,\n        payload: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Login failed'\n      });\n      toast.error(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Login failed');\n    }\n  };\n  const logout = () => {\n    dispatch({\n      type: AUTH_ACTIONS.LOGOUT\n    });\n    toast.success('Logged out');\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      ...state,\n      login,\n      logout,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"70wnMUpu/OuI9OV9blTZx296LBw=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","authAPI","toast","jsxDEV","_jsxDEV","AuthContext","AUTH_ACTIONS","SET_LOADING","LOGIN_SUCCESS","LOGOUT","UPDATE_USER","SET_ERROR","authReducer","state","action","type","loading","payload","user","token","isAuthenticated","error","AuthProvider","children","_s","dispatch","JSON","parse","localStorage","getItem","setItem","stringify","removeItem","login","email","password","res","post","data","success","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","message","logout","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/contexts/AuthContext.js"],"sourcesContent":["// AuthContext.js\r\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport { authAPI } from '../utils/api';\r\nimport toast from 'react-hot-toast';\r\n\r\n// Auth context\r\nconst AuthContext = createContext();\r\n\r\n// Actions\r\nconst AUTH_ACTIONS = {\r\n  SET_LOADING: 'SET_LOADING',\r\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\r\n  LOGOUT: 'LOGOUT',\r\n  UPDATE_USER: 'UPDATE_USER',\r\n  SET_ERROR: 'SET_ERROR',\r\n};\r\n\r\n// Reducer\r\nconst authReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case AUTH_ACTIONS.SET_LOADING:\r\n      return { ...state, loading: action.payload };\r\n\r\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        token: action.payload.token,\r\n        isAuthenticated: true,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case AUTH_ACTIONS.LOGOUT:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case AUTH_ACTIONS.UPDATE_USER:\r\n      return { ...state, user: action.payload };\r\n\r\n    case AUTH_ACTIONS.SET_ERROR:\r\n      return { ...state, error: action.payload, loading: false };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Provider\r\nexport const AuthProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, {\r\n    user: JSON.parse(localStorage.getItem('user')) || null,\r\n    token: localStorage.getItem('token') || null,\r\n    isAuthenticated: !!localStorage.getItem('token'),\r\n    loading: false,\r\n    error: null,\r\n  });\r\n\r\n  // Persist changes to localStorage\r\n  useEffect(() => {\r\n    if (state.user && state.token) {\r\n      localStorage.setItem('user', JSON.stringify(state.user));\r\n      localStorage.setItem('token', state.token);\r\n    } else {\r\n      localStorage.removeItem('user');\r\n      localStorage.removeItem('token');\r\n    }\r\n  }, [state.user, state.token]);\r\n\r\n  // Login function\r\n  const login = async (email, password) => {\r\n    dispatch({ type: AUTH_ACTIONS.SET_LOADING, payload: true });\r\n    try {\r\n      const res = await authAPI.post('/login', { email, password });\r\n\r\n      dispatch({\r\n        type: AUTH_ACTIONS.LOGIN_SUCCESS,\r\n        payload: { user: res.data.user, token: res.data.token },\r\n      });\r\n\r\n      toast.success('Login successful!');\r\n    } catch (err) {\r\n      dispatch({\r\n        type: AUTH_ACTIONS.SET_ERROR,\r\n        payload: err.response?.data?.message || 'Login failed',\r\n      });\r\n      toast.error(err.response?.data?.message || 'Login failed');\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    dispatch({ type: AUTH_ACTIONS.LOGOUT });\r\n    toast.success('Logged out');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        ...state,\r\n        login,\r\n        logout,\r\n        dispatch,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}