{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/admin/SurveyBuilder.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { surveysAPI } from '../../utils/api';\nimport Toggle from '../../components/Toggle';\nimport { ArrowLeft, Plus, Trash2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TYPE_OPTIONS = [{\n  value: 'short_text',\n  label: 'Short Text'\n}, {\n  value: 'long_text',\n  label: 'Long Text'\n}, {\n  value: 'multiple_choice',\n  label: 'Multiple Choice'\n}, {\n  value: 'checkbox',\n  label: 'Checkboxes'\n}, {\n  value: 'rating',\n  label: 'Rating'\n}];\nconst emptyQuestion = () => ({\n  text: '',\n  type: 'short_text',\n  required: false,\n  options: [],\n  optionsText: '' // <-- keep raw text for MCQ/checkbox while typing\n});\nexport default function SurveyBuilder() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const isEdit = Boolean(id);\n  const navigate = useNavigate();\n  const [saving, setSaving] = useState(false);\n  const [form, setForm] = useState({\n    title: '',\n    description: '',\n    audience: 'all',\n    status: 'draft',\n    questions: [emptyQuestion()]\n  });\n  const isActive = useMemo(() => form.status === 'active', [form.status]);\n  useEffect(() => {\n    if (!isEdit) return;\n    (async () => {\n      try {\n        const data = await surveysAPI.get(id);\n        setForm({\n          title: data.title || '',\n          description: data.description || '',\n          audience: (data.audience || 'all').toLowerCase(),\n          status: (data.status || 'draft').toLowerCase(),\n          questions: Array.isArray(data.questions) && data.questions.length ? data.questions.map(q => ({\n            _id: q._id,\n            text: q.text || '',\n            type: (q.type || 'short_text').toLowerCase(),\n            required: !!q.required,\n            options: Array.isArray(q.options) ? q.options : [],\n            optionsText: Array.isArray(q.options) ? q.options.join('\\n') : '' // <-- hydrate text\n          })) : [emptyQuestion()]\n        });\n      } catch (err) {\n        console.error(err);\n        alert('Failed to load survey.');\n        navigate('/admin/surveys');\n      }\n    })();\n  }, [id, isEdit, navigate]);\n  const update = patch => setForm(prev => ({\n    ...prev,\n    ...patch\n  }));\n  const updateQ = (idx, patch) => setForm(prev => {\n    const next = [...prev.questions];\n    next[idx] = {\n      ...next[idx],\n      ...patch\n    };\n    return {\n      ...prev,\n      questions: next\n    };\n  });\n  const addQuestion = () => setForm(prev => ({\n    ...prev,\n    questions: [...prev.questions, emptyQuestion()]\n  }));\n  const removeQuestion = idx => setForm(prev => {\n    const next = prev.questions.filter((_, i) => i !== idx);\n    return {\n      ...prev,\n      questions: next.length ? next : [emptyQuestion()]\n    };\n  });\n  const save = async () => {\n    setSaving(true);\n    try {\n      const payload = {\n        ...form,\n        status: form.status === 'active' ? 'active' : 'draft',\n        questions: form.questions.map(q => {\n          var _q$optionsText;\n          const isChoice = q.type === 'multiple_choice' || q.type === 'checkbox';\n          // Clean ONLY on save\n          const cleanedOptions = isChoice ? String((_q$optionsText = q.optionsText) !== null && _q$optionsText !== void 0 ? _q$optionsText : '').split('\\n').map(s => s.trim()).filter(s => s.length > 0) : [];\n          return {\n            _id: q._id,\n            text: q.text,\n            type: q.type,\n            required: !!q.required,\n            options: cleanedOptions\n          };\n        })\n      };\n      if (isEdit) await surveysAPI.update(id, payload);else await surveysAPI.create(payload);\n      navigate('/admin/surveys');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      alert((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to save survey.');\n    } finally {\n      setSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-5xl mx-auto px-4 py-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-3 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => navigate(-1),\n        className: \"inline-flex items-center gap-2 px-2 py-1 rounded-md text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hidden sm:inline\",\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-semibold\",\n        children: isEdit ? 'Edit Survey' : 'New Survey'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: saving,\n          onClick: save,\n          className: \"btn btn-primary btn-sm\",\n          children: saving ? 'Savingâ€¦' : 'Save'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mb-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body grid gap-4 md:grid-cols-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input w-full\",\n            value: form.title,\n            onChange: e => update({\n              title: e.target.value\n            }),\n            placeholder: \"Survey title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: \"Audience\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"input w-full\",\n            value: form.audience,\n            onChange: e => update({\n              audience: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"students\",\n              children: \"Students\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"alumni\",\n              children: \"Alumni\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"textarea w-full\",\n            rows: 3,\n            value: form.description,\n            onChange: e => update({\n              description: e.target.value\n            }),\n            placeholder: \"Describe this survey\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex md:col-span-1 md:items-start md:justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label mb-1 block text-right\",\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-end gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(Toggle, {\n                checked: isActive,\n                onChange: on => update({\n                  status: on ? 'active' : 'draft'\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `text-sm font-medium ${isActive ? 'text-green-600' : 'text-gray-500'}`,\n                children: isActive ? 'Active' : 'Inactive'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs opacity-70 mt-1 max-w-[18rem] ml-auto\",\n              children: \"When Active, eligible students/alumni will be prompted to answer.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold\",\n        children: \"Questions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addQuestion,\n        className: \"btn btn-ghost btn-sm inline-flex items-center gap-1\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), \" Add question\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid gap-4\",\n      children: form.questions.map((q, i) => {\n        var _q$optionsText4;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body grid gap-4 md:grid-cols-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2 flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-medium\",\n                children: [\"Q\", i + 1]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-600\",\n                    children: \"Required\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                    checked: q.required,\n                    onChange: on => updateQ(i, {\n                      required: on\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm opacity-80\",\n                    children: q.required ? 'Yes' : 'No'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => removeQuestion(i),\n                  className: \"btn btn-ghost btn-xs text-error inline-flex items-center gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 21\n                  }, this), \" Remove\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Question Text\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input w-full\",\n                value: q.text,\n                onChange: e => updateQ(i, {\n                  text: e.target.value\n                }),\n                placeholder: \"Write your question\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"input w-full\",\n                value: q.type,\n                onChange: e => {\n                  var _q$optionsText2, _q$optionsText3;\n                  const nextType = e.target.value;\n                  // if switching away from choice types, keep options but also set optionsText for future\n                  updateQ(i, {\n                    type: nextType,\n                    optionsText: nextType === 'multiple_choice' || nextType === 'checkbox' ? (_q$optionsText2 = q.optionsText) !== null && _q$optionsText2 !== void 0 ? _q$optionsText2 : (q.options || []).join('\\n') : (_q$optionsText3 = q.optionsText) !== null && _q$optionsText3 !== void 0 ? _q$optionsText3 : ''\n                  });\n                },\n                children: TYPE_OPTIONS.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: opt.value,\n                  children: opt.label\n                }, opt.value, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), (q.type === 'multiple_choice' || q.type === 'checkbox') && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Options (one per line)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"textarea w-full\",\n                rows: 3,\n                value: (_q$optionsText4 = q.optionsText) !== null && _q$optionsText4 !== void 0 ? _q$optionsText4 : (q.options || []).join('\\n'),\n                onChange: e =>\n                // DO NOT trim/filter while typing; keep raw text\n                updateQ(i, {\n                  optionsText: e.target.value,\n                  options: e.target.value.split('\\n') // keep lines as-is during edit\n                }),\n                placeholder: `e.g. Option A\nOption B\nOption C`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this)\n        }, q._id || i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n_s(SurveyBuilder, \"27868LvCxsB7n6Bw+RALuARanI0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = SurveyBuilder;\nvar _c;\n$RefreshReg$(_c, \"SurveyBuilder\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","useParams","surveysAPI","Toggle","ArrowLeft","Plus","Trash2","jsxDEV","_jsxDEV","TYPE_OPTIONS","value","label","emptyQuestion","text","type","required","options","optionsText","SurveyBuilder","_s","id","isEdit","Boolean","navigate","saving","setSaving","form","setForm","title","description","audience","status","questions","isActive","data","get","toLowerCase","Array","isArray","length","map","q","_id","join","err","console","error","alert","update","patch","prev","updateQ","idx","next","addQuestion","removeQuestion","filter","_","i","save","payload","_q$optionsText","isChoice","cleanedOptions","String","split","s","trim","create","_err$response","_err$response$data","response","message","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","disabled","onChange","e","target","placeholder","rows","checked","on","_q$optionsText4","_q$optionsText2","_q$optionsText3","nextType","opt","_c","$RefreshReg$"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/admin/SurveyBuilder.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { surveysAPI } from '../../utils/api';\nimport Toggle from '../../components/Toggle';\nimport { ArrowLeft, Plus, Trash2 } from 'lucide-react';\n\nconst TYPE_OPTIONS = [\n  { value: 'short_text', label: 'Short Text' },\n  { value: 'long_text', label: 'Long Text' },\n  { value: 'multiple_choice', label: 'Multiple Choice' },\n  { value: 'checkbox', label: 'Checkboxes' },\n  { value: 'rating', label: 'Rating' },\n];\n\nconst emptyQuestion = () => ({\n  text: '',\n  type: 'short_text',\n  required: false,\n  options: [],\n  optionsText: '', // <-- keep raw text for MCQ/checkbox while typing\n});\n\nexport default function SurveyBuilder() {\n  const { id } = useParams();\n  const isEdit = Boolean(id);\n  const navigate = useNavigate();\n\n  const [saving, setSaving] = useState(false);\n  const [form, setForm] = useState({\n    title: '',\n    description: '',\n    audience: 'all',\n    status: 'draft',\n    questions: [emptyQuestion()],\n  });\n\n  const isActive = useMemo(() => form.status === 'active', [form.status]);\n\n  useEffect(() => {\n    if (!isEdit) return;\n    (async () => {\n      try {\n        const data = await surveysAPI.get(id);\n        setForm({\n          title: data.title || '',\n          description: data.description || '',\n          audience: (data.audience || 'all').toLowerCase(),\n          status: (data.status || 'draft').toLowerCase(),\n          questions: Array.isArray(data.questions) && data.questions.length\n            ? data.questions.map(q => ({\n                _id: q._id,\n                text: q.text || '',\n                type: (q.type || 'short_text').toLowerCase(),\n                required: !!q.required,\n                options: Array.isArray(q.options) ? q.options : [],\n                optionsText: Array.isArray(q.options) ? q.options.join('\\n') : '', // <-- hydrate text\n              }))\n            : [emptyQuestion()],\n        });\n      } catch (err) {\n        console.error(err);\n        alert('Failed to load survey.');\n        navigate('/admin/surveys');\n      }\n    })();\n  }, [id, isEdit, navigate]);\n\n  const update = (patch) => setForm(prev => ({ ...prev, ...patch }));\n  const updateQ = (idx, patch) =>\n    setForm(prev => {\n      const next = [...prev.questions];\n      next[idx] = { ...next[idx], ...patch };\n      return { ...prev, questions: next };\n    });\n\n  const addQuestion = () =>\n    setForm(prev => ({ ...prev, questions: [...prev.questions, emptyQuestion()] }));\n\n  const removeQuestion = (idx) =>\n    setForm(prev => {\n      const next = prev.questions.filter((_, i) => i !== idx);\n      return { ...prev, questions: next.length ? next : [emptyQuestion()] };\n    });\n\n  const save = async () => {\n    setSaving(true);\n    try {\n      const payload = {\n        ...form,\n        status: form.status === 'active' ? 'active' : 'draft',\n        questions: form.questions.map(q => {\n          const isChoice = q.type === 'multiple_choice' || q.type === 'checkbox';\n          // Clean ONLY on save\n          const cleanedOptions = isChoice\n            ? String(q.optionsText ?? '')\n                .split('\\n')\n                .map(s => s.trim())\n                .filter(s => s.length > 0)\n            : [];\n          return {\n            _id: q._id,\n            text: q.text,\n            type: q.type,\n            required: !!q.required,\n            options: cleanedOptions,\n          };\n        }),\n      };\n\n      if (isEdit) await surveysAPI.update(id, payload);\n      else await surveysAPI.create(payload);\n\n      navigate('/admin/surveys');\n    } catch (err) {\n      console.error(err);\n      alert(err?.response?.data?.message || 'Failed to save survey.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-5xl mx-auto px-4 py-6\">\n      {/* Header */}\n      <div className=\"flex items-center gap-3 mb-6\">\n        <button\n          type=\"button\"\n          onClick={() => navigate(-1)}\n          className=\"inline-flex items-center gap-2 px-2 py-1 rounded-md text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          <span className=\"hidden sm:inline\">Back</span>\n        </button>\n\n        <h1 className=\"text-xl font-semibold\">\n          {isEdit ? 'Edit Survey' : 'New Survey'}\n        </h1>\n\n        <div className=\"ml-auto\">\n          <button\n            disabled={saving}\n            onClick={save}\n            className=\"btn btn-primary btn-sm\"\n          >\n            {saving ? 'Savingâ€¦' : 'Save'}\n          </button>\n        </div>\n      </div>\n\n      {/* Main form */}\n      <div className=\"card mb-6\">\n        <div className=\"card-body grid gap-4 md:grid-cols-3\">\n          <div className=\"md:col-span-2\">\n            <label className=\"label\">Title</label>\n            <input\n              className=\"input w-full\"\n              value={form.title}\n              onChange={(e) => update({ title: e.target.value })}\n              placeholder=\"Survey title\"\n            />\n          </div>\n\n          <div className=\"\">\n            <label className=\"label\">Audience</label>\n            <select\n              className=\"input w-full\"\n              value={form.audience}\n              onChange={(e) => update({ audience: e.target.value })}\n            >\n              <option value=\"all\">All</option>\n              <option value=\"students\">Students</option>\n              <option value=\"alumni\">Alumni</option>\n            </select>\n          </div>\n\n          <div className=\"md:col-span-2\">\n            <label className=\"label\">Description</label>\n            <textarea\n              className=\"textarea w-full\"\n              rows={3}\n              value={form.description}\n              onChange={(e) => update({ description: e.target.value })}\n              placeholder=\"Describe this survey\"\n            />\n          </div>\n\n          <div className=\"flex md:col-span-1 md:items-start md:justify-end\">\n            <div className=\"text-right\">\n              <label className=\"label mb-1 block text-right\">Status</label>\n              <div className=\"flex items-center justify-end gap-3\">\n                <Toggle\n                  checked={isActive}\n                  onChange={(on) => update({ status: on ? 'active' : 'draft' })}\n                />\n                <span className={`text-sm font-medium ${isActive ? 'text-green-600' : 'text-gray-500'}`}>\n                  {isActive ? 'Active' : 'Inactive'}\n                </span>\n              </div>\n              <p className=\"text-xs opacity-70 mt-1 max-w-[18rem] ml-auto\">\n                When Active, eligible students/alumni will be prompted to answer.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Questions */}\n      <div className=\"flex items-center justify-between mb-2\">\n        <h2 className=\"text-lg font-semibold\">Questions</h2>\n        <button onClick={addQuestion} className=\"btn btn-ghost btn-sm inline-flex items-center gap-1\">\n          <Plus className=\"w-4 h-4\" /> Add question\n        </button>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {form.questions.map((q, i) => (\n          <div key={q._id || i} className=\"card\">\n            <div className=\"card-body grid gap-4 md:grid-cols-2\">\n              <div className=\"md:col-span-2 flex items-center justify-between\">\n                <div className=\"text-sm font-medium\">Q{i + 1}</div>\n\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-gray-600\">Required</span>\n                    <Toggle\n                      checked={q.required}\n                      onChange={(on) => updateQ(i, { required: on })}\n                    />\n                    <span className=\"text-sm opacity-80\">\n                      {q.required ? 'Yes' : 'No'}\n                    </span>\n                  </div>\n\n                  <button\n                    type=\"button\"\n                    onClick={() => removeQuestion(i)}\n                    className=\"btn btn-ghost btn-xs text-error inline-flex items-center gap-1\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" /> Remove\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"label\">Question Text</label>\n                <input\n                  className=\"input w-full\"\n                  value={q.text}\n                  onChange={(e) => updateQ(i, { text: e.target.value })}\n                  placeholder=\"Write your question\"\n                />\n              </div>\n\n              <div>\n                <label className=\"label\">Type</label>\n                <select\n                  className=\"input w-full\"\n                  value={q.type}\n                  onChange={(e) => {\n                    const nextType = e.target.value;\n                    // if switching away from choice types, keep options but also set optionsText for future\n                    updateQ(i, {\n                      type: nextType,\n                      optionsText:\n                        nextType === 'multiple_choice' || nextType === 'checkbox'\n                          ? (q.optionsText ?? (q.options || []).join('\\n'))\n                          : (q.optionsText ?? ''),\n                    });\n                  }}\n                >\n                  {TYPE_OPTIONS.map((opt) => (\n                    <option key={opt.value} value={opt.value}>\n                      {opt.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div />\n\n              {(q.type === 'multiple_choice' || q.type === 'checkbox') && (\n                <div className=\"md:col-span-2\">\n                  <label className=\"label\">Options (one per line)</label>\n                  <textarea\n                    className=\"textarea w-full\"\n                    rows={3}\n                    value={q.optionsText ?? (q.options || []).join('\\n')}\n                    onChange={(e) =>\n                      // DO NOT trim/filter while typing; keep raw text\n                      updateQ(i, {\n                        optionsText: e.target.value,\n                        options: e.target.value.split('\\n'), // keep lines as-is during edit\n                      })\n                    }\n                    placeholder={`e.g. Option A\nOption B\nOption C`}\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AACzD,SAASC,UAAU,QAAQ,iBAAiB;AAC5C,OAAOC,MAAM,MAAM,yBAAyB;AAC5C,SAASC,SAAS,EAAEC,IAAI,EAAEC,MAAM,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvD,MAAMC,YAAY,GAAG,CACnB;EAAEC,KAAK,EAAE,YAAY;EAAEC,KAAK,EAAE;AAAa,CAAC,EAC5C;EAAED,KAAK,EAAE,WAAW;EAAEC,KAAK,EAAE;AAAY,CAAC,EAC1C;EAAED,KAAK,EAAE,iBAAiB;EAAEC,KAAK,EAAE;AAAkB,CAAC,EACtD;EAAED,KAAK,EAAE,UAAU;EAAEC,KAAK,EAAE;AAAa,CAAC,EAC1C;EAAED,KAAK,EAAE,QAAQ;EAAEC,KAAK,EAAE;AAAS,CAAC,CACrC;AAED,MAAMC,aAAa,GAAGA,CAAA,MAAO;EAC3BC,IAAI,EAAE,EAAE;EACRC,IAAI,EAAE,YAAY;EAClBC,QAAQ,EAAE,KAAK;EACfC,OAAO,EAAE,EAAE;EACXC,WAAW,EAAE,EAAE,CAAE;AACnB,CAAC,CAAC;AAEF,eAAe,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EACtC,MAAM;IAAEC;EAAG,CAAC,GAAGnB,SAAS,CAAC,CAAC;EAC1B,MAAMoB,MAAM,GAAGC,OAAO,CAACF,EAAE,CAAC;EAC1B,MAAMG,QAAQ,GAAGvB,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACwB,MAAM,EAAEC,SAAS,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAAC2B,IAAI,EAAEC,OAAO,CAAC,GAAG5B,QAAQ,CAAC;IAC/B6B,KAAK,EAAE,EAAE;IACTC,WAAW,EAAE,EAAE;IACfC,QAAQ,EAAE,KAAK;IACfC,MAAM,EAAE,OAAO;IACfC,SAAS,EAAE,CAACpB,aAAa,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEF,MAAMqB,QAAQ,GAAGnC,OAAO,CAAC,MAAM4B,IAAI,CAACK,MAAM,KAAK,QAAQ,EAAE,CAACL,IAAI,CAACK,MAAM,CAAC,CAAC;EAEvElC,SAAS,CAAC,MAAM;IACd,IAAI,CAACwB,MAAM,EAAE;IACb,CAAC,YAAY;MACX,IAAI;QACF,MAAMa,IAAI,GAAG,MAAMhC,UAAU,CAACiC,GAAG,CAACf,EAAE,CAAC;QACrCO,OAAO,CAAC;UACNC,KAAK,EAAEM,IAAI,CAACN,KAAK,IAAI,EAAE;UACvBC,WAAW,EAAEK,IAAI,CAACL,WAAW,IAAI,EAAE;UACnCC,QAAQ,EAAE,CAACI,IAAI,CAACJ,QAAQ,IAAI,KAAK,EAAEM,WAAW,CAAC,CAAC;UAChDL,MAAM,EAAE,CAACG,IAAI,CAACH,MAAM,IAAI,OAAO,EAAEK,WAAW,CAAC,CAAC;UAC9CJ,SAAS,EAAEK,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACF,SAAS,CAAC,IAAIE,IAAI,CAACF,SAAS,CAACO,MAAM,GAC7DL,IAAI,CAACF,SAAS,CAACQ,GAAG,CAACC,CAAC,KAAK;YACvBC,GAAG,EAAED,CAAC,CAACC,GAAG;YACV7B,IAAI,EAAE4B,CAAC,CAAC5B,IAAI,IAAI,EAAE;YAClBC,IAAI,EAAE,CAAC2B,CAAC,CAAC3B,IAAI,IAAI,YAAY,EAAEsB,WAAW,CAAC,CAAC;YAC5CrB,QAAQ,EAAE,CAAC,CAAC0B,CAAC,CAAC1B,QAAQ;YACtBC,OAAO,EAAEqB,KAAK,CAACC,OAAO,CAACG,CAAC,CAACzB,OAAO,CAAC,GAAGyB,CAAC,CAACzB,OAAO,GAAG,EAAE;YAClDC,WAAW,EAAEoB,KAAK,CAACC,OAAO,CAACG,CAAC,CAACzB,OAAO,CAAC,GAAGyB,CAAC,CAACzB,OAAO,CAAC2B,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAE;UACrE,CAAC,CAAC,CAAC,GACH,CAAC/B,aAAa,CAAC,CAAC;QACtB,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOgC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;QAClBG,KAAK,CAAC,wBAAwB,CAAC;QAC/BxB,QAAQ,CAAC,gBAAgB,CAAC;MAC5B;IACF,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,CAACH,EAAE,EAAEC,MAAM,EAAEE,QAAQ,CAAC,CAAC;EAE1B,MAAMyB,MAAM,GAAIC,KAAK,IAAKtB,OAAO,CAACuB,IAAI,KAAK;IAAE,GAAGA,IAAI;IAAE,GAAGD;EAAM,CAAC,CAAC,CAAC;EAClE,MAAME,OAAO,GAAGA,CAACC,GAAG,EAAEH,KAAK,KACzBtB,OAAO,CAACuB,IAAI,IAAI;IACd,MAAMG,IAAI,GAAG,CAAC,GAAGH,IAAI,CAAClB,SAAS,CAAC;IAChCqB,IAAI,CAACD,GAAG,CAAC,GAAG;MAAE,GAAGC,IAAI,CAACD,GAAG,CAAC;MAAE,GAAGH;IAAM,CAAC;IACtC,OAAO;MAAE,GAAGC,IAAI;MAAElB,SAAS,EAAEqB;IAAK,CAAC;EACrC,CAAC,CAAC;EAEJ,MAAMC,WAAW,GAAGA,CAAA,KAClB3B,OAAO,CAACuB,IAAI,KAAK;IAAE,GAAGA,IAAI;IAAElB,SAAS,EAAE,CAAC,GAAGkB,IAAI,CAAClB,SAAS,EAAEpB,aAAa,CAAC,CAAC;EAAE,CAAC,CAAC,CAAC;EAEjF,MAAM2C,cAAc,GAAIH,GAAG,IACzBzB,OAAO,CAACuB,IAAI,IAAI;IACd,MAAMG,IAAI,GAAGH,IAAI,CAAClB,SAAS,CAACwB,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKN,GAAG,CAAC;IACvD,OAAO;MAAE,GAAGF,IAAI;MAAElB,SAAS,EAAEqB,IAAI,CAACd,MAAM,GAAGc,IAAI,GAAG,CAACzC,aAAa,CAAC,CAAC;IAAE,CAAC;EACvE,CAAC,CAAC;EAEJ,MAAM+C,IAAI,GAAG,MAAAA,CAAA,KAAY;IACvBlC,SAAS,CAAC,IAAI,CAAC;IACf,IAAI;MACF,MAAMmC,OAAO,GAAG;QACd,GAAGlC,IAAI;QACPK,MAAM,EAAEL,IAAI,CAACK,MAAM,KAAK,QAAQ,GAAG,QAAQ,GAAG,OAAO;QACrDC,SAAS,EAAEN,IAAI,CAACM,SAAS,CAACQ,GAAG,CAACC,CAAC,IAAI;UAAA,IAAAoB,cAAA;UACjC,MAAMC,QAAQ,GAAGrB,CAAC,CAAC3B,IAAI,KAAK,iBAAiB,IAAI2B,CAAC,CAAC3B,IAAI,KAAK,UAAU;UACtE;UACA,MAAMiD,cAAc,GAAGD,QAAQ,GAC3BE,MAAM,EAAAH,cAAA,GAACpB,CAAC,CAACxB,WAAW,cAAA4C,cAAA,cAAAA,cAAA,GAAI,EAAE,CAAC,CACxBI,KAAK,CAAC,IAAI,CAAC,CACXzB,GAAG,CAAC0B,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAClBX,MAAM,CAACU,CAAC,IAAIA,CAAC,CAAC3B,MAAM,GAAG,CAAC,CAAC,GAC5B,EAAE;UACN,OAAO;YACLG,GAAG,EAAED,CAAC,CAACC,GAAG;YACV7B,IAAI,EAAE4B,CAAC,CAAC5B,IAAI;YACZC,IAAI,EAAE2B,CAAC,CAAC3B,IAAI;YACZC,QAAQ,EAAE,CAAC,CAAC0B,CAAC,CAAC1B,QAAQ;YACtBC,OAAO,EAAE+C;UACX,CAAC;QACH,CAAC;MACH,CAAC;MAED,IAAI1C,MAAM,EAAE,MAAMnB,UAAU,CAAC8C,MAAM,CAAC5B,EAAE,EAAEwC,OAAO,CAAC,CAAC,KAC5C,MAAM1D,UAAU,CAACkE,MAAM,CAACR,OAAO,CAAC;MAErCrC,QAAQ,CAAC,gBAAgB,CAAC;IAC5B,CAAC,CAAC,OAAOqB,GAAG,EAAE;MAAA,IAAAyB,aAAA,EAAAC,kBAAA;MACZzB,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBG,KAAK,CAAC,CAAAH,GAAG,aAAHA,GAAG,wBAAAyB,aAAA,GAAHzB,GAAG,CAAE2B,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAbD,aAAA,CAAenC,IAAI,cAAAoC,kBAAA,uBAAnBA,kBAAA,CAAqBE,OAAO,KAAI,wBAAwB,CAAC;IACjE,CAAC,SAAS;MACR/C,SAAS,CAAC,KAAK,CAAC;IAClB;EACF,CAAC;EAED,oBACEjB,OAAA;IAAKiE,SAAS,EAAC,6BAA6B;IAAAC,QAAA,gBAE1ClE,OAAA;MAAKiE,SAAS,EAAC,8BAA8B;MAAAC,QAAA,gBAC3ClE,OAAA;QACEM,IAAI,EAAC,QAAQ;QACb6D,OAAO,EAAEA,CAAA,KAAMpD,QAAQ,CAAC,CAAC,CAAC,CAAE;QAC5BkD,SAAS,EAAC,iHAAiH;QAAAC,QAAA,gBAE3HlE,OAAA,CAACJ,SAAS;UAACqE,SAAS,EAAC;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACjCvE,OAAA;UAAMiE,SAAS,EAAC,kBAAkB;UAAAC,QAAA,EAAC;QAAI;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxC,CAAC,eAETvE,OAAA;QAAIiE,SAAS,EAAC,uBAAuB;QAAAC,QAAA,EAClCrD,MAAM,GAAG,aAAa,GAAG;MAAY;QAAAuD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC,eAELvE,OAAA;QAAKiE,SAAS,EAAC,SAAS;QAAAC,QAAA,eACtBlE,OAAA;UACEwE,QAAQ,EAAExD,MAAO;UACjBmD,OAAO,EAAEhB,IAAK;UACdc,SAAS,EAAC,wBAAwB;UAAAC,QAAA,EAEjClD,MAAM,GAAG,SAAS,GAAG;QAAM;UAAAoD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNvE,OAAA;MAAKiE,SAAS,EAAC,WAAW;MAAAC,QAAA,eACxBlE,OAAA;QAAKiE,SAAS,EAAC,qCAAqC;QAAAC,QAAA,gBAClDlE,OAAA;UAAKiE,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5BlE,OAAA;YAAOiE,SAAS,EAAC,OAAO;YAAAC,QAAA,EAAC;UAAK;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACtCvE,OAAA;YACEiE,SAAS,EAAC,cAAc;YACxB/D,KAAK,EAAEgB,IAAI,CAACE,KAAM;YAClBqD,QAAQ,EAAGC,CAAC,IAAKlC,MAAM,CAAC;cAAEpB,KAAK,EAAEsD,CAAC,CAACC,MAAM,CAACzE;YAAM,CAAC,CAAE;YACnD0E,WAAW,EAAC;UAAc;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENvE,OAAA;UAAKiE,SAAS,EAAC,EAAE;UAAAC,QAAA,gBACflE,OAAA;YAAOiE,SAAS,EAAC,OAAO;YAAAC,QAAA,EAAC;UAAQ;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACzCvE,OAAA;YACEiE,SAAS,EAAC,cAAc;YACxB/D,KAAK,EAAEgB,IAAI,CAACI,QAAS;YACrBmD,QAAQ,EAAGC,CAAC,IAAKlC,MAAM,CAAC;cAAElB,QAAQ,EAAEoD,CAAC,CAACC,MAAM,CAACzE;YAAM,CAAC,CAAE;YAAAgE,QAAA,gBAEtDlE,OAAA;cAAQE,KAAK,EAAC,KAAK;cAAAgE,QAAA,EAAC;YAAG;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAChCvE,OAAA;cAAQE,KAAK,EAAC,UAAU;cAAAgE,QAAA,EAAC;YAAQ;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC1CvE,OAAA;cAAQE,KAAK,EAAC,QAAQ;cAAAgE,QAAA,EAAC;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAENvE,OAAA;UAAKiE,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5BlE,OAAA;YAAOiE,SAAS,EAAC,OAAO;YAAAC,QAAA,EAAC;UAAW;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC5CvE,OAAA;YACEiE,SAAS,EAAC,iBAAiB;YAC3BY,IAAI,EAAE,CAAE;YACR3E,KAAK,EAAEgB,IAAI,CAACG,WAAY;YACxBoD,QAAQ,EAAGC,CAAC,IAAKlC,MAAM,CAAC;cAAEnB,WAAW,EAAEqD,CAAC,CAACC,MAAM,CAACzE;YAAM,CAAC,CAAE;YACzD0E,WAAW,EAAC;UAAsB;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENvE,OAAA;UAAKiE,SAAS,EAAC,kDAAkD;UAAAC,QAAA,eAC/DlE,OAAA;YAAKiE,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlE,OAAA;cAAOiE,SAAS,EAAC,6BAA6B;cAAAC,QAAA,EAAC;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC7DvE,OAAA;cAAKiE,SAAS,EAAC,qCAAqC;cAAAC,QAAA,gBAClDlE,OAAA,CAACL,MAAM;gBACLmF,OAAO,EAAErD,QAAS;gBAClBgD,QAAQ,EAAGM,EAAE,IAAKvC,MAAM,CAAC;kBAAEjB,MAAM,EAAEwD,EAAE,GAAG,QAAQ,GAAG;gBAAQ,CAAC;cAAE;gBAAAX,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/D,CAAC,eACFvE,OAAA;gBAAMiE,SAAS,EAAE,uBAAuBxC,QAAQ,GAAG,gBAAgB,GAAG,eAAe,EAAG;gBAAAyC,QAAA,EACrFzC,QAAQ,GAAG,QAAQ,GAAG;cAAU;gBAAA2C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7B,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,eACNvE,OAAA;cAAGiE,SAAS,EAAC,+CAA+C;cAAAC,QAAA,EAAC;YAE7D;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNvE,OAAA;MAAKiE,SAAS,EAAC,wCAAwC;MAAAC,QAAA,gBACrDlE,OAAA;QAAIiE,SAAS,EAAC,uBAAuB;QAAAC,QAAA,EAAC;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpDvE,OAAA;QAAQmE,OAAO,EAAErB,WAAY;QAACmB,SAAS,EAAC,qDAAqD;QAAAC,QAAA,gBAC3FlE,OAAA,CAACH,IAAI;UAACoE,SAAS,EAAC;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,iBAC9B;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAENvE,OAAA;MAAKiE,SAAS,EAAC,YAAY;MAAAC,QAAA,EACxBhD,IAAI,CAACM,SAAS,CAACQ,GAAG,CAAC,CAACC,CAAC,EAAEiB,CAAC;QAAA,IAAA8B,eAAA;QAAA,oBACvBhF,OAAA;UAAsBiE,SAAS,EAAC,MAAM;UAAAC,QAAA,eACpClE,OAAA;YAAKiE,SAAS,EAAC,qCAAqC;YAAAC,QAAA,gBAClDlE,OAAA;cAAKiE,SAAS,EAAC,iDAAiD;cAAAC,QAAA,gBAC9DlE,OAAA;gBAAKiE,SAAS,EAAC,qBAAqB;gBAAAC,QAAA,GAAC,GAAC,EAAChB,CAAC,GAAG,CAAC;cAAA;gBAAAkB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAEnDvE,OAAA;gBAAKiE,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBACtClE,OAAA;kBAAKiE,SAAS,EAAC,yBAAyB;kBAAAC,QAAA,gBACtClE,OAAA;oBAAMiE,SAAS,EAAC,uBAAuB;oBAAAC,QAAA,EAAC;kBAAQ;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACvDvE,OAAA,CAACL,MAAM;oBACLmF,OAAO,EAAE7C,CAAC,CAAC1B,QAAS;oBACpBkE,QAAQ,EAAGM,EAAE,IAAKpC,OAAO,CAACO,CAAC,EAAE;sBAAE3C,QAAQ,EAAEwE;oBAAG,CAAC;kBAAE;oBAAAX,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChD,CAAC,eACFvE,OAAA;oBAAMiE,SAAS,EAAC,oBAAoB;oBAAAC,QAAA,EACjCjC,CAAC,CAAC1B,QAAQ,GAAG,KAAK,GAAG;kBAAI;oBAAA6D,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACtB,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eAENvE,OAAA;kBACEM,IAAI,EAAC,QAAQ;kBACb6D,OAAO,EAAEA,CAAA,KAAMpB,cAAc,CAACG,CAAC,CAAE;kBACjCe,SAAS,EAAC,gEAAgE;kBAAAC,QAAA,gBAE1ElE,OAAA,CAACF,MAAM;oBAACmE,SAAS,EAAC;kBAAS;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,WAChC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAENvE,OAAA;cAAKiE,SAAS,EAAC,eAAe;cAAAC,QAAA,gBAC5BlE,OAAA;gBAAOiE,SAAS,EAAC,OAAO;gBAAAC,QAAA,EAAC;cAAa;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC9CvE,OAAA;gBACEiE,SAAS,EAAC,cAAc;gBACxB/D,KAAK,EAAE+B,CAAC,CAAC5B,IAAK;gBACdoE,QAAQ,EAAGC,CAAC,IAAK/B,OAAO,CAACO,CAAC,EAAE;kBAAE7C,IAAI,EAAEqE,CAAC,CAACC,MAAM,CAACzE;gBAAM,CAAC,CAAE;gBACtD0E,WAAW,EAAC;cAAqB;gBAAAR,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eAENvE,OAAA;cAAAkE,QAAA,gBACElE,OAAA;gBAAOiE,SAAS,EAAC,OAAO;gBAAAC,QAAA,EAAC;cAAI;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACrCvE,OAAA;gBACEiE,SAAS,EAAC,cAAc;gBACxB/D,KAAK,EAAE+B,CAAC,CAAC3B,IAAK;gBACdmE,QAAQ,EAAGC,CAAC,IAAK;kBAAA,IAAAO,eAAA,EAAAC,eAAA;kBACf,MAAMC,QAAQ,GAAGT,CAAC,CAACC,MAAM,CAACzE,KAAK;kBAC/B;kBACAyC,OAAO,CAACO,CAAC,EAAE;oBACT5C,IAAI,EAAE6E,QAAQ;oBACd1E,WAAW,EACT0E,QAAQ,KAAK,iBAAiB,IAAIA,QAAQ,KAAK,UAAU,IAAAF,eAAA,GACpDhD,CAAC,CAACxB,WAAW,cAAAwE,eAAA,cAAAA,eAAA,GAAI,CAAChD,CAAC,CAACzB,OAAO,IAAI,EAAE,EAAE2B,IAAI,CAAC,IAAI,CAAC,IAAA+C,eAAA,GAC7CjD,CAAC,CAACxB,WAAW,cAAAyE,eAAA,cAAAA,eAAA,GAAI;kBAC1B,CAAC,CAAC;gBACJ,CAAE;gBAAAhB,QAAA,EAEDjE,YAAY,CAAC+B,GAAG,CAAEoD,GAAG,iBACpBpF,OAAA;kBAAwBE,KAAK,EAAEkF,GAAG,CAAClF,KAAM;kBAAAgE,QAAA,EACtCkB,GAAG,CAACjF;gBAAK,GADCiF,GAAG,CAAClF,KAAK;kBAAAkE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAEd,CACT;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eAENvE,OAAA;cAAAoE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EAEN,CAACtC,CAAC,CAAC3B,IAAI,KAAK,iBAAiB,IAAI2B,CAAC,CAAC3B,IAAI,KAAK,UAAU,kBACrDN,OAAA;cAAKiE,SAAS,EAAC,eAAe;cAAAC,QAAA,gBAC5BlE,OAAA;gBAAOiE,SAAS,EAAC,OAAO;gBAAAC,QAAA,EAAC;cAAsB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACvDvE,OAAA;gBACEiE,SAAS,EAAC,iBAAiB;gBAC3BY,IAAI,EAAE,CAAE;gBACR3E,KAAK,GAAA8E,eAAA,GAAE/C,CAAC,CAACxB,WAAW,cAAAuE,eAAA,cAAAA,eAAA,GAAI,CAAC/C,CAAC,CAACzB,OAAO,IAAI,EAAE,EAAE2B,IAAI,CAAC,IAAI,CAAE;gBACrDsC,QAAQ,EAAGC,CAAC;gBACV;gBACA/B,OAAO,CAACO,CAAC,EAAE;kBACTzC,WAAW,EAAEiE,CAAC,CAACC,MAAM,CAACzE,KAAK;kBAC3BM,OAAO,EAAEkE,CAAC,CAACC,MAAM,CAACzE,KAAK,CAACuD,KAAK,CAAC,IAAI,CAAC,CAAE;gBACvC,CAAC,CACF;gBACDmB,WAAW,EAAE;AACjC;AACA;cAAU;gBAAAR,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACS,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC,GApFEtC,CAAC,CAACC,GAAG,IAAIgB,CAAC;UAAAkB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAqFf,CAAC;MAAA,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC5D,EAAA,CA5RuBD,aAAa;EAAA,QACpBjB,SAAS,EAEPD,WAAW;AAAA;AAAA6F,EAAA,GAHN3E,aAAa;AAAA,IAAA2E,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}