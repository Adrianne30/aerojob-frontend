{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\n// Dashboard.js\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Briefcase, Users, Building2, BarChart3, TrendingUp, Eye, FileText, UserCheck, Paintbrush } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jobsAPI, companiesAPI, usersAPI } from '../utils/api';\nimport LoadingSpinner from '../components/LoadingSpinner';\n\n// Chart.js\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst Dashboard = () => {\n  _s();\n  var _THEMES$find, _stats$adminStats, _stats$adminStats2, _stats$adminStats3;\n  const [stats, setStats] = useState({\n    totalJobs: 0,\n    activeJobs: 0,\n    totalCompanies: 0,\n    featuredJobs: [],\n    recentActivity: [],\n    adminStats: {\n      pendingApproval: 0,\n      totalUsers: 0,\n      newUsers: 0,\n      roleCounts: {\n        students: 0,\n        alumni: 0,\n        admins: 0\n      },\n      topSearches: [] // [{ term, total }]\n    }\n  });\n  const [loading, setLoading] = useState(true);\n  const {\n    user,\n    isAdmin\n  } = useAuth();\n\n  /* -------------------- Admin theme -------------------- */\n  const THEMES = [{\n    id: 'default',\n    name: 'Default (Blue)',\n    className: 'theme-default'\n  }, {\n    id: 'emerald',\n    name: 'Emerald',\n    className: 'theme-emerald'\n  }, {\n    id: 'rose',\n    name: 'Rose',\n    className: 'theme-rose'\n  }, {\n    id: 'philsca',\n    name: 'PhilSCA (Gold)',\n    className: 'theme-philsca'\n  }];\n  const [adminTheme, setAdminTheme] = useState(() => typeof window !== 'undefined' && localStorage.getItem('admin_theme') || 'default');\n  const themeClass = ((_THEMES$find = THEMES.find(t => t.id === adminTheme)) === null || _THEMES$find === void 0 ? void 0 : _THEMES$find.className) || 'theme-default';\n  useEffect(() => {\n    if (isAdmin()) localStorage.setItem('admin_theme', adminTheme);\n  }, [adminTheme, isAdmin]);\n  const AdminWrapper = ({\n    children\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `admin-portal ${themeClass}`,\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .admin-portal.theme-default { --primary: 37 99 235; }\n        .admin-portal.theme-emerald { --primary: 5 150 105; }\n        .admin-portal.theme-rose    { --primary: 225 29 72; }\n        .admin-portal.theme-philsca { --primary: 217 119 6; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), children]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n\n  /* -------------------- Fetch dashboard data -------------------- */\n  useEffect(() => {\n    fetchDashboardData();\n  }, []);\n  const toInt = v => Number.isFinite(v) ? v : parseInt(v !== null && v !== void 0 ? v : 0, 10) || 0;\n  function normalizeRoleCounts(data) {\n    var _ref, _c$students, _ref2, _c$alumni, _ref3, _c$admins;\n    if (!data) return {\n      students: 0,\n      alumni: 0,\n      admins: 0\n    };\n    const c = data.byRole || data.roleCounts || data.counts || {};\n    return {\n      students: toInt((_ref = (_c$students = c.students) !== null && _c$students !== void 0 ? _c$students : c.student) !== null && _ref !== void 0 ? _ref : 0),\n      alumni: toInt((_ref2 = (_c$alumni = c.alumni) !== null && _c$alumni !== void 0 ? _c$alumni : c.alumnus) !== null && _ref2 !== void 0 ? _ref2 : 0),\n      admins: toInt((_ref3 = (_c$admins = c.admins) !== null && _c$admins !== void 0 ? _c$admins : c.admin) !== null && _ref3 !== void 0 ? _ref3 : 0)\n    };\n  }\n  function normalizeTopSearches(data) {\n    const arr = (data === null || data === void 0 ? void 0 : data.topSearches) || [];\n    return arr.map(x => {\n      var _ref4, _x$term, _ref5, _x$total;\n      return {\n        term: (_ref4 = (_x$term = x.term) !== null && _x$term !== void 0 ? _x$term : x.query) !== null && _ref4 !== void 0 ? _ref4 : '',\n        total: toInt((_ref5 = (_x$total = x.total) !== null && _x$total !== void 0 ? _x$total : x.count) !== null && _ref5 !== void 0 ? _ref5 : 0)\n      };\n    });\n  }\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      if (isAdmin()) {\n        const [jobsStats, companiesStats, usersStats] = await Promise.all([jobsAPI.getStatistics(), companiesAPI.getStatistics(), usersAPI.getStatistics()]);\n        const unwrap = res => {\n          var _ref6, _ref7, _res$data$data, _res$data;\n          return (_ref6 = (_ref7 = (_res$data$data = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.data) !== null && _res$data$data !== void 0 ? _res$data$data : res === null || res === void 0 ? void 0 : res.data) !== null && _ref7 !== void 0 ? _ref7 : res) !== null && _ref6 !== void 0 ? _ref6 : {};\n        };\n        const jd = unwrap(jobsStats);\n        const cd = unwrap(companiesStats);\n        const ud = unwrap(usersStats);\n        setStats({\n          totalJobs: toInt(jd.totalJobs),\n          activeJobs: toInt(jd.activeJobs),\n          totalCompanies: toInt(cd.totalCompanies),\n          featuredJobs: [],\n          recentActivity: [],\n          adminStats: {\n            pendingApproval: toInt(jd.pendingApproval),\n            totalUsers: toInt(ud.totalUsers),\n            newUsers: toInt(ud.newUsers),\n            roleCounts: normalizeRoleCounts(ud),\n            topSearches: normalizeTopSearches(jd)\n          }\n        });\n      } else {\n        var _jobsData$data$total, _jobsData$data, _jobsData$data$jobs$l, _jobsData$data2, _jobsData$data2$jobs, _featuredJobsData$dat, _jobsData$data3, _jobsData$data3$jobs;\n        const [jobsData, featuredJobsData] = await Promise.all([jobsAPI.getAll({\n          limit: 5\n        }), jobsAPI.getFeatured()]);\n        setStats({\n          totalJobs: (_jobsData$data$total = jobsData === null || jobsData === void 0 ? void 0 : (_jobsData$data = jobsData.data) === null || _jobsData$data === void 0 ? void 0 : _jobsData$data.total) !== null && _jobsData$data$total !== void 0 ? _jobsData$data$total : 0,\n          activeJobs: (_jobsData$data$jobs$l = jobsData === null || jobsData === void 0 ? void 0 : (_jobsData$data2 = jobsData.data) === null || _jobsData$data2 === void 0 ? void 0 : (_jobsData$data2$jobs = _jobsData$data2.jobs) === null || _jobsData$data2$jobs === void 0 ? void 0 : _jobsData$data2$jobs.length) !== null && _jobsData$data$jobs$l !== void 0 ? _jobsData$data$jobs$l : 0,\n          totalCompanies: 0,\n          featuredJobs: (featuredJobsData === null || featuredJobsData === void 0 ? void 0 : (_featuredJobsData$dat = featuredJobsData.data) === null || _featuredJobsData$dat === void 0 ? void 0 : _featuredJobsData$dat.jobs) || [],\n          recentActivity: (jobsData === null || jobsData === void 0 ? void 0 : (_jobsData$data3 = jobsData.data) === null || _jobsData$data3 === void 0 ? void 0 : (_jobsData$data3$jobs = _jobsData$data3.jobs) === null || _jobsData$data3$jobs === void 0 ? void 0 : _jobsData$data3$jobs.slice(0, 5)) || [],\n          adminStats: {\n            pendingApproval: 0,\n            totalUsers: 0,\n            newUsers: 0,\n            roleCounts: {\n              students: 0,\n              alumni: 0,\n              admins: 0\n            },\n            topSearches: []\n          }\n        });\n      }\n    } catch (err) {\n      console.error('Error fetching dashboard data:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n    text: \"Loading dashboard...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 23\n  }, this);\n\n  /* -------------------- Stat card -------------------- */\n  const StatCard = ({\n    icon: Icon,\n    title,\n    value,\n    color = 'primary'\n  }) => {\n    const cls = {\n      primary: 'bg-blue-100 text-blue-600',\n      success: 'bg-green-100 text-green-600',\n      warning: 'bg-yellow-100 text-yellow-600',\n      error: 'bg-red-100 text-red-600'\n    }[color];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-card p-4 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-9 h-9 ${cls} rounded-md flex items-center justify-center mb-2 mx-auto`,\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xl font-semibold text-gray-900\",\n        children: value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-gray-600\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this);\n  };\n\n  /* -------------------- Chart.js configs -------------------- */\n  const roleData = {\n    labels: ['Students', 'Alumni', 'Admins'],\n    datasets: [{\n      label: 'Users',\n      data: [stats.adminStats.roleCounts.students, stats.adminStats.roleCounts.alumni, stats.adminStats.roleCounts.admins],\n      backgroundColor: 'rgba(37,99,235,0.6)',\n      borderRadius: 6\n    }]\n  };\n  const searchesData = {\n    labels: (stats.adminStats.topSearches || []).map(s => s.term),\n    datasets: [{\n      label: 'Searches',\n      data: (stats.adminStats.topSearches || []).map(s => s.total),\n      backgroundColor: 'rgba(251,113,133,0.6)',\n      borderRadius: 6\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      }\n    },\n    scales: {\n      x: {\n        ticks: {\n          font: {\n            size: 11\n          }\n        }\n      },\n      y: {\n        beginAtZero: true,\n        ticks: {\n          font: {\n            size: 11,\n            stepSize: 1\n          }\n        }\n      }\n    }\n  };\n  const horizontalOptions = {\n    ...chartOptions,\n    indexAxis: 'y'\n  };\n\n  /* -------------------- Admin page -------------------- */\n  const adminPage = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 flex items-start justify-between gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-heading font-bold text-gray-900\",\n          children: [\"Welcome back, \", user === null || user === void 0 ? void 0 : user.firstName, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 mt-1\",\n          children: \"Manage the AeroJob platform and monitor system activity.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"inline-flex items-center gap-2 text-xs text-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(Paintbrush, {\n          className: \"w-4 h-4 text-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Theme\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: adminTheme,\n          onChange: e => setAdminTheme(e.target.value),\n          className: \"input w-auto py-1 px-2 text-xs\",\n          children: THEMES.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: t.id,\n            children: t.name\n          }, t.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 30\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(StatCard, {\n        icon: Briefcase,\n        title: \"Total Jobs\",\n        value: stats.totalJobs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: FileText,\n        title: \"Pending Approval\",\n        value: ((_stats$adminStats = stats.adminStats) === null || _stats$adminStats === void 0 ? void 0 : _stats$adminStats.pendingApproval) || 0,\n        color: \"warning\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: Users,\n        title: \"Total Users\",\n        value: ((_stats$adminStats2 = stats.adminStats) === null || _stats$adminStats2 === void 0 ? void 0 : _stats$adminStats2.totalUsers) || 0,\n        color: \"success\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: UserCheck,\n        title: \"New Users (30d)\",\n        value: ((_stats$adminStats3 = stats.adminStats) === null || _stats$adminStats3 === void 0 ? void 0 : _stats$adminStats3.newUsers) || 0,\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-4 py-3 border-b\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-semibold text-gray-900 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n              className: \"w-4 h-4 mr-2 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), \"Total Users by Role\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 h-48\",\n          children: /*#__PURE__*/_jsxDEV(Bar, {\n            data: roleData,\n            options: chartOptions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-4 py-3 border-b\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-semibold text-gray-900 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n              className: \"w-4 h-4 mr-2 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this), \"Most Searched Jobs\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 h-48\",\n          children: /*#__PURE__*/_jsxDEV(Bar, {\n            data: searchesData,\n            options: horizontalOptions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 5\n  }, this);\n\n  /* -------------------- Non-admin page -------------------- */\n  const userPage = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-heading font-bold text-gray-900\",\n        children: [\"Welcome back, \", user === null || user === void 0 ? void 0 : user.firstName, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600 mt-1\",\n        children: \"Discover new opportunities and track your job search progress.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(StatCard, {\n        icon: Briefcase,\n        title: \"Available Jobs\",\n        value: stats.totalJobs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: Eye,\n        title: \"Jobs Viewed\",\n        value: 12,\n        color: \"success\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: FileText,\n        title: \"Applications\",\n        value: 3,\n        color: \"warning\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        icon: Building2,\n        title: \"Companies\",\n        value: stats.totalCompanies,\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 283,\n    columnNumber: 5\n  }, this);\n  return isAdmin() ? /*#__PURE__*/_jsxDEV(AdminWrapper, {\n    children: adminPage\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 22\n  }, this) : userPage;\n};\n_s(Dashboard, \"OoQ49qwX7SWzjdmRd9awwRrR5gQ=\", false, function () {\n  return [useAuth];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","Link","Briefcase","Users","Building2","BarChart3","TrendingUp","Eye","FileText","UserCheck","Paintbrush","useAuth","jobsAPI","companiesAPI","usersAPI","LoadingSpinner","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","Dashboard","_s","_THEMES$find","_stats$adminStats","_stats$adminStats2","_stats$adminStats3","stats","setStats","totalJobs","activeJobs","totalCompanies","featuredJobs","recentActivity","adminStats","pendingApproval","totalUsers","newUsers","roleCounts","students","alumni","admins","topSearches","loading","setLoading","user","isAdmin","THEMES","id","name","className","adminTheme","setAdminTheme","window","localStorage","getItem","themeClass","find","t","setItem","AdminWrapper","children","fileName","_jsxFileName","lineNumber","columnNumber","fetchDashboardData","toInt","v","Number","isFinite","parseInt","normalizeRoleCounts","data","_ref","_c$students","_ref2","_c$alumni","_ref3","_c$admins","c","byRole","counts","student","alumnus","admin","normalizeTopSearches","arr","map","x","_ref4","_x$term","_ref5","_x$total","term","query","total","count","jobsStats","companiesStats","usersStats","Promise","all","getStatistics","unwrap","res","_ref6","_ref7","_res$data$data","_res$data","jd","cd","ud","_jobsData$data$total","_jobsData$data","_jobsData$data$jobs$l","_jobsData$data2","_jobsData$data2$jobs","_featuredJobsData$dat","_jobsData$data3","_jobsData$data3$jobs","jobsData","featuredJobsData","getAll","limit","getFeatured","jobs","length","slice","err","console","error","text","StatCard","icon","Icon","title","value","color","cls","primary","success","warning","roleData","labels","datasets","label","backgroundColor","borderRadius","searchesData","s","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","scales","ticks","font","size","y","beginAtZero","stepSize","horizontalOptions","indexAxis","adminPage","firstName","onChange","e","target","options","userPage","_c","$RefreshReg$"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/Dashboard.js"],"sourcesContent":["// Dashboard.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  Briefcase,\r\n  Users,\r\n  Building2,\r\n  BarChart3,\r\n  TrendingUp,\r\n  Eye,\r\n  FileText,\r\n  UserCheck,\r\n  Paintbrush\r\n} from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { jobsAPI, companiesAPI, usersAPI } from '../utils/api';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\n\r\n// Chart.js\r\nimport { Bar } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\nconst Dashboard = () => {\r\n  const [stats, setStats] = useState({\r\n    totalJobs: 0,\r\n    activeJobs: 0,\r\n    totalCompanies: 0,\r\n    featuredJobs: [],\r\n    recentActivity: [],\r\n    adminStats: {\r\n      pendingApproval: 0,\r\n      totalUsers: 0,\r\n      newUsers: 0,\r\n      roleCounts: { students: 0, alumni: 0, admins: 0 },\r\n      topSearches: [] // [{ term, total }]\r\n    }\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const { user, isAdmin } = useAuth();\r\n\r\n  /* -------------------- Admin theme -------------------- */\r\n  const THEMES = [\r\n    { id: 'default', name: 'Default (Blue)', className: 'theme-default' },\r\n    { id: 'emerald', name: 'Emerald', className: 'theme-emerald' },\r\n    { id: 'rose', name: 'Rose', className: 'theme-rose' },\r\n    { id: 'philsca', name: 'PhilSCA (Gold)', className: 'theme-philsca' },\r\n  ];\r\n  const [adminTheme, setAdminTheme] = useState(\r\n    () => (typeof window !== 'undefined' && localStorage.getItem('admin_theme')) || 'default'\r\n  );\r\n  const themeClass = THEMES.find(t => t.id === adminTheme)?.className || 'theme-default';\r\n\r\n  useEffect(() => {\r\n    if (isAdmin()) localStorage.setItem('admin_theme', adminTheme);\r\n  }, [adminTheme, isAdmin]);\r\n\r\n  const AdminWrapper = ({ children }) => (\r\n    <div className={`admin-portal ${themeClass}`}>\r\n      <style>{`\r\n        .admin-portal.theme-default { --primary: 37 99 235; }\r\n        .admin-portal.theme-emerald { --primary: 5 150 105; }\r\n        .admin-portal.theme-rose    { --primary: 225 29 72; }\r\n        .admin-portal.theme-philsca { --primary: 217 119 6; }\r\n      `}</style>\r\n      {children}\r\n    </div>\r\n  );\r\n\r\n  /* -------------------- Fetch dashboard data -------------------- */\r\n  useEffect(() => { fetchDashboardData(); }, []);\r\n\r\n  const toInt = (v) => Number.isFinite(v) ? v : parseInt(v ?? 0, 10) || 0;\r\n\r\n  function normalizeRoleCounts(data) {\r\n    if (!data) return { students: 0, alumni: 0, admins: 0 };\r\n    const c = data.byRole || data.roleCounts || data.counts || {};\r\n    return {\r\n      students: toInt(c.students ?? c.student ?? 0),\r\n      alumni: toInt(c.alumni ?? c.alumnus ?? 0),\r\n      admins: toInt(c.admins ?? c.admin ?? 0),\r\n    };\r\n  }\r\n\r\n  function normalizeTopSearches(data) {\r\n    const arr = data?.topSearches || [];\r\n    return arr.map(x => ({\r\n      term: x.term ?? x.query ?? '',\r\n      total: toInt(x.total ?? x.count ?? 0),\r\n    }));\r\n  }\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      if (isAdmin()) {\r\n        const [jobsStats, companiesStats, usersStats] = await Promise.all([\r\n          jobsAPI.getStatistics(),\r\n          companiesAPI.getStatistics(),\r\n          usersAPI.getStatistics()\r\n        ]);\r\n        const unwrap = (res) => (res?.data?.data ?? res?.data ?? res ?? {});\r\n        const jd = unwrap(jobsStats);\r\n        const cd = unwrap(companiesStats);\r\n        const ud = unwrap(usersStats);\r\n\r\n        setStats({\r\n          totalJobs: toInt(jd.totalJobs),\r\n          activeJobs: toInt(jd.activeJobs),\r\n          totalCompanies: toInt(cd.totalCompanies),\r\n          featuredJobs: [],\r\n          recentActivity: [],\r\n          adminStats: {\r\n            pendingApproval: toInt(jd.pendingApproval),\r\n            totalUsers: toInt(ud.totalUsers),\r\n            newUsers: toInt(ud.newUsers),\r\n            roleCounts: normalizeRoleCounts(ud),\r\n            topSearches: normalizeTopSearches(jd),\r\n          }\r\n        });\r\n      } else {\r\n        const [jobsData, featuredJobsData] = await Promise.all([\r\n          jobsAPI.getAll({ limit: 5 }),\r\n          jobsAPI.getFeatured()\r\n        ]);\r\n        setStats({\r\n          totalJobs: jobsData?.data?.total ?? 0,\r\n          activeJobs: jobsData?.data?.jobs?.length ?? 0,\r\n          totalCompanies: 0,\r\n          featuredJobs: featuredJobsData?.data?.jobs || [],\r\n          recentActivity: jobsData?.data?.jobs?.slice(0, 5) || [],\r\n          adminStats: { pendingApproval: 0, totalUsers: 0, newUsers: 0, roleCounts: { students: 0, alumni: 0, admins: 0 }, topSearches: [] }\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching dashboard data:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner text=\"Loading dashboard...\" />;\r\n\r\n  /* -------------------- Stat card -------------------- */\r\n  const StatCard = ({ icon: Icon, title, value, color = 'primary' }) => {\r\n    const cls = {\r\n      primary: 'bg-blue-100 text-blue-600',\r\n      success: 'bg-green-100 text-green-600',\r\n      warning: 'bg-yellow-100 text-yellow-600',\r\n      error:   'bg-red-100 text-red-600'\r\n    }[color];\r\n    return (\r\n      <div className=\"stats-card p-4 text-center\">\r\n        <div className={`w-9 h-9 ${cls} rounded-md flex items-center justify-center mb-2 mx-auto`}>\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n        <div className=\"text-xl font-semibold text-gray-900\">{value}</div>\r\n        <div className=\"text-xs text-gray-600\">{title}</div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /* -------------------- Chart.js configs -------------------- */\r\n  const roleData = {\r\n    labels: ['Students', 'Alumni', 'Admins'],\r\n    datasets: [\r\n      {\r\n        label: 'Users',\r\n        data: [\r\n          stats.adminStats.roleCounts.students,\r\n          stats.adminStats.roleCounts.alumni,\r\n          stats.adminStats.roleCounts.admins,\r\n        ],\r\n        backgroundColor: 'rgba(37,99,235,0.6)',\r\n        borderRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const searchesData = {\r\n    labels: (stats.adminStats.topSearches || []).map(s => s.term),\r\n    datasets: [\r\n      {\r\n        label: 'Searches',\r\n        data: (stats.adminStats.topSearches || []).map(s => s.total),\r\n        backgroundColor: 'rgba(251,113,133,0.6)',\r\n        borderRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: { legend: { display: false } },\r\n    scales: {\r\n      x: { ticks: { font: { size: 11 } } },\r\n      y: { beginAtZero: true, ticks: { font: { size: 11, stepSize: 1 } } },\r\n    },\r\n  };\r\n\r\n  const horizontalOptions = {\r\n    ...chartOptions,\r\n    indexAxis: 'y',\r\n  };\r\n\r\n  /* -------------------- Admin page -------------------- */\r\n  const adminPage = (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6 flex items-start justify-between gap-3\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-heading font-bold text-gray-900\">\r\n            Welcome back, {user?.firstName}!\r\n          </h1>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            Manage the AeroJob platform and monitor system activity.\r\n          </p>\r\n        </div>\r\n        <label className=\"inline-flex items-center gap-2 text-xs text-gray-700\">\r\n          <Paintbrush className=\"w-4 h-4 text-blue-600\" />\r\n          <span>Theme</span>\r\n          <select\r\n            value={adminTheme}\r\n            onChange={(e) => setAdminTheme(e.target.value)}\r\n            className=\"input w-auto py-1 px-2 text-xs\"\r\n          >\r\n            {THEMES.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\">\r\n        <StatCard icon={Briefcase} title=\"Total Jobs\" value={stats.totalJobs} />\r\n        <StatCard icon={FileText} title=\"Pending Approval\" value={stats.adminStats?.pendingApproval || 0} color=\"warning\" />\r\n        <StatCard icon={Users} title=\"Total Users\" value={stats.adminStats?.totalUsers || 0} color=\"success\" />\r\n        <StatCard icon={UserCheck} title=\"New Users (30d)\" value={stats.adminStats?.newUsers || 0} color=\"primary\" />\r\n      </div>\r\n\r\n      {/* Charts */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Users by Role */}\r\n        <div className=\"card\">\r\n          <div className=\"px-4 py-3 border-b\">\r\n            <h3 className=\"text-sm font-semibold text-gray-900 flex items-center\">\r\n              <BarChart3 className=\"w-4 h-4 mr-2 text-blue-600\" />\r\n              Total Users by Role\r\n            </h3>\r\n          </div>\r\n          <div className=\"p-4 h-48\">\r\n            <Bar data={roleData} options={chartOptions} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Most Searched Jobs */}\r\n        <div className=\"card\">\r\n          <div className=\"px-4 py-3 border-b\">\r\n            <h3 className=\"text-sm font-semibold text-gray-900 flex items-center\">\r\n              <TrendingUp className=\"w-4 h-4 mr-2 text-blue-600\" />\r\n              Most Searched Jobs\r\n            </h3>\r\n          </div>\r\n          <div className=\"p-4 h-48\">\r\n            <Bar data={searchesData} options={horizontalOptions} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  /* -------------------- Non-admin page -------------------- */\r\n  const userPage = (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-2xl font-heading font-bold text-gray-900\">\r\n          Welcome back, {user?.firstName}!\r\n        </h1>\r\n        <p className=\"text-sm text-gray-600 mt-1\">\r\n          Discover new opportunities and track your job search progress.\r\n        </p>\r\n      </div>\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\">\r\n        <StatCard icon={Briefcase} title=\"Available Jobs\" value={stats.totalJobs} />\r\n        <StatCard icon={Eye} title=\"Jobs Viewed\" value={12} color=\"success\" />\r\n        <StatCard icon={FileText} title=\"Applications\" value={3} color=\"warning\" />\r\n        <StatCard icon={Building2} title=\"Companies\" value={stats.totalCompanies} color=\"primary\" />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return isAdmin() ? <AdminWrapper>{adminPage}</AdminWrapper> : userPage;\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}